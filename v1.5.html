<!DOCTYPE html>
<html>
<head>
	<title>
		Genshin Impact – Step Into a Vast Magical World of Adventure
	</title>
	<meta charset="utf-8">
	<meta name="author" content="Eqnoxx">
	<script src="js/jquery-1.11.1.min.js" type="text/javascript"></script>
	<link rel="stylesheet" type="text/css" href="css/v1.5.css">
</head>
<body>
	<div id="loading"></div>
	<div id="fab">

		<!--header-->
		<header>

			<!--bars-->
			<a href="https://ys.mihoyo.com"><div class="logo"></div></a>
			<a href="official-site.html"><div class="bars bar1"></div></a>
			<a href="download.html"><div class="bars bar2"></div></a>
			<!--bars-->

			<!--elements-->
			<div class="video"></div>
			<div class="title"></div>
			<!--elements-->

		</header>
		<!--header-->

		<!--article-->
		<article>

			<!--c-i-->
			<div class="c-i">
				<div class="slide" style="left: 0px;">
					<!--zhongli-->
					<div class="roles" id="zhongli">
						<div class="desc-frame">
							<img src="element/v1.5/c-i/zhongli-name.png" class="name">
							<div class="desc">
								A mysterious expert contracted by the Wangsheng Funeral Parlor. Extremely knowledgeable in all things.
							</div>
							<img src="element/v1.5/c-i/zhongli-video.png" class="video">
							<a href="https://genshin.mihoyo.com/en/character/liyue?char=9" target="_blank" class="view-more"><br>View more &gt;</a>
						</div>
						<img src="element/v1.5/c-i/zhongli-pic.png" class="pic">
					</div>
					<!--zhongli-->
					<!--yanfei-->
					<div class="roles" id="yanfei">
						<div class="desc-frame">
							<img src="element/v1.5/c-i/yanfei-name.png" class="name">
							<div class="desc">
								A well-known legal adviser active in Liyue Harbor. A brilliant young lady in whose veins runs the mixed blood of an illuminated beast.
							</div>
							<img src="element/v1.5/c-i/yanfei-video.png" class="video">
							<a herf="https://genshin.mihoyo.com/en/character/liyue?char=13" target="_blank" class="view-more"><br>View more &gt;</a>
						</div>
						<img src="element/v1.5/c-i/yanfei-pic.png" class="pic">
					</div>
					<!--yanfei-->
				</div>
				<div class="slide-button slide-button-left"></div>
				<div class="slide-button slide-button-right"></div>
			</div>
			<!--c-i-->

			<!--v-i-->
			<div class="v-i">
				<div class="frame">
					<div class="visual">
						<div class="slide" style="left: 0px;">
							<img src="element/v1.5/v-i/1.png" class="pics">
							<img src="element/v1.5/v-i/2.png" class="pics">
							<img src="element/v1.5/v-i/3.png" class="pics">
							<img src="element/v1.5/v-i/4.png" class="pics">
							<img src="element/v1.5/v-i/5.png" class="pics">
							<img src="element/v1.5/v-i/6.png" class="pics">
							<img src="element/v1.5/v-i/7.png" class="pics">
							<img src="element/v1.5/v-i/8.png" class="pics">
							<img src="element/v1.5/v-i/9.png" class="pics">
						</div>
					</div>
					<div class="slide-button slide-button-left"></div>
					<div class="slide-button slide-button-right"></div>
				</div>
			</div>
			<!--v-i-->


			<div class="g-f">
				<div class="frame">

					<div class="pics pic-left" id="pic1"></div>
					<div class="pics pic-front" id="pic2"></div>
					<div class="pics pic-right" id="pic3"></div>
					<div class="pics pic-back" id="pic4"></div>
					<div class="pics pic-back" id="pic5"></div>

					<div class="slide-button slide-button-left"></div>
					<div class="point-frame">
						<div class="page-point" id="p1"></div>
						<div class="page-point" id="p2"></div>
						<div class="page-point" id="p3"></div>
						<div class="page-point" id="p4"></div>
						<div class="page-point" id="p5"></div>
					</div>
					<div class="slide-button slide-button-right"></div>
				</div>
			</div>

		</article>
		<!--article-->

		<!--footer-->
		<footer>
			<a href="index.html">
				<div class="pic"></div>
				<div class="desc">
						the Link to V1.4
				</div>
			</a>
		</footer>
		<!--footer-->
	</div>

	<div id="bottom">
		<div class="bottom-frame">
			<div class="logo-frame">
				<div class="mihoyo"></div>
				<div class="line"></div>
				<div class="genshin"></div>
			</div>
			<div class="author">
				<div class="nick-name-chn"></div>
				<div class="nick-name-eng"></div>
				<div class="line2"></div>
				<div class="real-name">计智20H1范若筠&nbsp;&nbsp;&nbsp;作品</div>
			</div>
		</div>
	</div>

	<!--videos-->
	<div class="video-back">
		<div class="video-frame">
			<button>关闭</button>
			<iframe src="about:blank" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>
		</div>
	</div>
	<!--videos-->

	<!--js-->
	<script type="text/javascript">
		function sleep(time){
 			return new Promise((resolve) => setTimeout(resolve, time));
		}

		//loading
		$(function() {
			$("#loading").css("z-index", 0);
			$("#loading").css("opacity", 0);
		});
		//loading

		//resize
		var pos_ci = 0, pos_vi = 0;
		$(window).resize(function() {
			var width = $("body").width();
			$(".roles").css("width", width);
			$(".slide").css("left", -pos_ci*width+"px");

		});
		$(".roles").css("width", $("body").width());
		//resize

		//c-i-slide
		$(".c-i .slide-button-left").click(function() {
			slide_ci(-1);
		});
		$(".c-i .slide-button-right").click(function() {
			slide_ci(+1);
		});
		var slide_ci = function(delta) {
			pos_ci += delta;
			var width = $("body").width();
			var count = $(".roles").length;
			if (pos_ci > count - 1) {
				pos_ci = 0;
			}
			if (pos_ci < 0) {
				pos_ci = count - 1;
			}
			$(".c-i .slide").css("left", -pos_ci*width + "px");
		};
		//c-i-slide

		//v-i-slide
		$(".v-i .slide-button-left").click(function() {
			slide_vi(-1);
		});
		$(".v-i .slide-button-right").click(function() {
			slide_vi(+1);
		});
		var slide_vi = function(delta) {
			pos_vi += delta;
			var old_width = parseInt($(".v-i .pics").css("width").slice(0, -2));
			var width = old_width + 16;
			var count = $(".v-i .pics").length;
			if (pos_vi > count - 3) {
				pos_vi = 0;
			}
			if (pos_vi < 0) {
				pos_vi = count - 3;
			}
			$(".v-i .slide").css("left", -pos_vi*width + "px");
		};
		//v-i-slide

		//change-point
		var index = 1;
		function change_point(cmd) {
			$(".page-point").filter(":eq("+index+")").css("background-image", "url(element/v1.5/g-f/p"+cmd+".png)");
		}
		change_point(2);
		//change-point

		//point-hover
		$(".page-point").hover(function() {
			$(this).css("background-image", "url(element/v1.5/g-f/p2.png)");
		}, function() {
			$(this).css("background-image", "url(element/v1.5/g-f/p1.png)");
		});
		//point-hover

		//g-f-slide
		var all = $(".g-f .frame .pics");
		var len = all.length;
		function slide_move(target) {
			target = (target+len) % len;
			var right_index = (target + 1) % len;
			var left_index = (target-1+len) % len;
			var right = all.filter(":eq("+right_index+")");
			var front = all.filter(":eq("+target+")");
			var left = all.filter(":eq("+left_index+")");
			all.each(function() {
				var self = $(this);
				if (self.is(left)) {
					self.attr("class", "pics pic-left");
				}
				else if (self.is(front)) {
					self.attr("class", "pics pic-front");
				}
				else if (self.is(right)) {
					self.attr("class", "pics pic-right");
				}
				else {
					self.attr("class", "pics pic-back");
				}
			});
			change_point(1);
			index = target;
			change_point(2);
		}
		$(".g-f .slide-button-left").click(function() {
			slide_move(index-1);
		});
		$(".g-f .slide-button-right").click(function() {
			slide_move(index+1);
		});
		//g-f-slide

		//page-point
		$(".g-f .page-point").click(async function() {
			change_point(1);
			var delta = $(this).index() - index;
			if (Math.abs(delta) >= len/2) {
				delta = (delta>0?-1:1)*len + delta;
			}
			var step = Math.abs(delta)/delta;
			if (delta == 0) return;
			while (delta != 0) {
				slide_move(index + step);
				await sleep(300);
				delta -= step;
			}
			change_point(2);
		});
		//page-point

		//videos
		//video-1
		$("#fab header .video").click(function(){
			$(".video-back").addClass("video-active");
			$(".video-back iframe").attr("src", "https://player.bilibili.com/player.html?aid=672535190&bvid=BV1tU4y1h7KB&cid=324552319&page=1");
			$("body").css("overflow", "hidden");
		});
		//video-2
		$("#fab #zhongli .video").click(function(){
			$(".video-back").addClass("video-active");
			$(".video-back iframe").attr("src", "https://player.bilibili.com/player.html?aid=712909579&bvid=BV1hD4y1X7Rm&cid=330929291&page=1");
			$("body").css("overflow", "hidden");
		});
		//video-3
		$("#fab #yanfei .video").click(function(){
			$(".video-back").addClass("video-active");
			$(".video-back iframe").attr("src", "https://player.bilibili.com/player.html?aid=887690396&bvid=BV18K4y1P7AB&cid=327144012&page=1");
			$("body").css("overflow", "hidden");
		});
		//close
		$(".video-back button").click(function(){
			$(".video-back iframe").attr("src", "about:blank");
			$(".video-back").removeClass("video-active");
			$("body").css("overflow", "auto");
		});
		//videos
	</script>  
	<!--js-->


</body>
</html>
